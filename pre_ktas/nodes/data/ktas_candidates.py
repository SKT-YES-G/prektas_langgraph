"""
KTAS (Korean Triage and Acuity Scale) 분류 후보군 하드코딩 데이터.

계층 구조:
  Stage 2 (대분류) → Stage 3 (중분류) → Stage 4 (소분류/구체 상태)

출처: 한국형 중증도 분류도구(KTAS) 지침 기반 구성
"""

# ──────────────────────────────────────────────────────────────────────────────
# Stage 2 후보군 (대분류)
# ──────────────────────────────────────────────────────────────────────────────
STAGE2_CANDIDATES: list[str] = [
    "첫인상 평가(명백한 중증)",
    "물질오용",
    "정신건강",
    "신경계",
    "눈",
    "코",
    "귀",
    "입,목/얼굴",
    "호흡기계",
    "심혈관계",
    "소화기계",
    "임신/여성생식계",
    "비뇨기계/남성생식계",
    "근골격계",
    "몸통외상",
    "환경손상",
    "피부",
    "일반",
]

# ──────────────────────────────────────────────────────────────────────────────
# Stage 3 후보군 매핑  (stage2 선택 → stage3 후보 목록)
# ──────────────────────────────────────────────────────────────────────────────
STAGE3_BY_STAGE2: dict[str, list[str]] = {
    "첫인상 평가(명백한 중증)": [
       "첫인상 평가(명백한 중증)",
    ],
    "물질오용": [
        "물질오용/중독",
        "과다복용",
        "물질금단",
    ],
    "정신건강": [
        "자해/자살 시도",
        "공격적 행동/폭력",
        "급성 정신병적 삽화",
        "불안/공황 삽화",
        "기타 정신건강 문제",
    ],
    "신경계": [
        "의식변화",
        "두통",
        "어지럼증",
        "경련/발작",
        "편측마비/근력저하",
        "감각이상",
        "언어/삼킴 장애",
        "협조운동장애/보행 장애",
        "기타 신경계 증상",
    ],
    "눈": [
        "눈 통증",
        "시력 변화",
        "눈 외상",
        "눈 감염/염증",
        "눈 이물감",
        "기타 눈 증상",
    ],
    "코": [
        "코피(비출혈)",
        "코 이물",
        "코 막힘/분비물",
        "코 외상",
        "기타 코 증상",
    ],
    "귀": [
        "귀 통증",
        "청력 감소",
        "이루",
        "귀 이물",
        "귀 외상",
        "기타 귀 증상",
    ],
    "입,목/얼굴": [
        "인후통",
        "삼킴 장애",
        "구강 통증",
        "턱 통증/외상",
        "얼굴 부종",
        "구강/인두 이물",
        "기타 구강/얼굴 증상",
    ],
    "호흡기계": [
        "호흡곤란",
        "기침",
        "천명",
        "가슴통증(호흡기성)",
        "객혈",
        "기타 호흡기 증상",
    ],
    "심혈관계": [
        "가슴통증(심장성)",
        "두근거림/부정맥",
        "실신/전실신",
        "고혈압",
        "저혈압/쇼크",
        "말초부종",
        "기타 심혈관 증상",
    ],
    "소화기계": [
        "복통",
        "구역/구토",
        "설사",
        "변비",
        "토혈/흑색변",
        "혈변",
        "황달",
        "항문/직장 증상",
        "기타 소화기 증상",
    ],
    "임신/여성생식계": [
        "임신 관련 출혈",
        "복통(임신 중/산후)",
        "질 분비물/감염",
        "유방 증상",
        "생리 관련 증상",
        "기타 여성생식계 증상",
    ],
    "비뇨기계/남성생식계": [
        "배뇨통/빈뇨",
        "혈뇨",
        "요로결석",
        "음낭/고환 증상",
        "요폐",
        "기타 비뇨기 증상",
    ],
    "근골격계": [
        "사지 외상(골절/탈구 의심)",
        "관절통",
        "근육통/경련",
        "등/척추 통증",
        "사지 부종/홍반",
        "보행 장애",
        "기타 근골격계 증상",
    ],
    "몸통외상": [
        "두부 외상",
        "경추 외상",
        "흉부 외상",
        "복부 외상",
        "골반 외상",
        "다발성 외상",
    ],
    "환경손상": [
        "화상",
        "열 손상(열사병/열피로)",
        "저체온증/동상",
        "익수/질식",
        "전기/낙뢰 손상",
        "독소/방사선 노출",
        "교상/자상",
    ],
    "피부": [
        "발진",
        "두드러기/혈관부종",
        "피부 감염",
        "피부 외상(열상/좌상)",
        "기타 피부 증상",
    ],
    "일반": [
        "발열",
        "전신 쇠약/피로",
        "체중 감소",
        "발한/오한",
        "전신 부종",
        "기타 전신 증상",
    ],
}

# ──────────────────────────────────────────────────────────────────────────────
# Stage 4 후보군 매핑  (stage3 선택 → stage4 후보 목록)
# ──────────────────────────────────────────────────────────────────────────────
STAGE4_BY_STAGE3: dict[str, list[str]] = {
    # ── 첫인상 평가(명백한 중증) ───────────────────────────────────────────────
    "무응답/무맥박": [
        "심정지(VF/무맥 VT)",
        "심정지(무수축/PEA)",
    ],
    "의식없음/무반응": [
        "GCS 3-8 (외상성)",
        "GCS 3-8 (비외상성)",
        "약물/독소 유발 의식저하",
    ],
    "중증 호흡부전": [
        "SpO2 <90% + 호흡보조근 사용",
        "중추성 호흡 억제",
        "기도 폐쇄(완전)",
    ],
    "중증 쇼크": [
        "저혈압성 쇼크(SBP <90)",
        "패혈성 쇼크",
        "아나필락시스 쇼크",
        "신경성 쇼크",
    ],
    "다발성 외상(중증)": [
        "ISS ≥16 추정",
        "불안정 활력징후 동반 다발성 외상",
    ],
    "중증 알레르기 반응(아나필락시스)": [
        "기도 부종 동반 아나필락시스",
        "심혈관계 허탈 동반 아나필락시스",
    ],

    # ── 물질오용 ────────────────────────────────────────────────────────────
    "물질오용/중독": [
        "알코올 중독(경증/GCS≥14)",
        "알코올 중독(중등증/GCS 10-13)",
        "알코올 중독(중증/GCS<10)",
        "마약류(아편계) 중독",
        "자극제(필로폰 등) 중독",
        "진정제/수면제 중독",
        "흡입제 중독",
        "기타 물질 중독",
    ],
    "과다복용": [
        "아세트아미노펜 과다복용",
        "아스피린/NSAIDs 과다복용",
        "삼환계 항우울제 과다복용",
        "벤조디아제핀 과다복용",
        "아편계 과다복용",
        "심장약(디곡신/베타차단제 등) 과다복용",
        "항경련제 과다복용",
        "기타 처방약 과다복용",
        "기타 비처방약/보조제 과다복용",
    ],
    "물질금단": [
        "알코올 금단(경증: 손떨림/불안)",
        "알코올 금단(중등증: 경련 위험)",
        "알코올 금단 섬망(DT)",
        "아편계 금단",
        "벤조디아제핀 금단",
        "기타 물질 금단",
    ],

    # ── 정신건강 ────────────────────────────────────────────────────────────
    "자해/자살 시도": [
        "치명적 자해 수단(날카로운 도구/높은 곳) - 신체 손상 동반",
        "자살 시도(약물 섭취) - 의식 명료",
        "고위험 자살 사고(계획 있음, 수단 있음)",
        "저위험 자살 사고(계획 없음)",
    ],
    "공격적 행동/폭력": [
        "신체적 폭력 행사 중 (즉각 제압 필요)",
        "중등도 공격성(언어적 위협 + 신체 위협)",
        "경도 공격성(언어적 폭력만)",
    ],
    "급성 정신병적 삽화": [
        "현실 접촉 완전 상실 + 자/타해 위험",
        "현실 접촉 부분 상실(지남력 장애)",
        "조증 삽화(중증)",
        "조증 삽화(경증)",
    ],
    "불안/공황 삽화": [
        "공황 발작(심박 급상승 + 호흡곤란)",
        "급성 불안(신체화 증상 동반)",
        "급성 불안(신체화 증상 없음)",
    ],
    "기타 정신건강 문제": [
        "급성 해리 삽화",
        "심각한 섭식장애(저혈당/전해질 이상 동반)",
        "기타 정신건강 증상",
    ],

    # ── 신경계 ───────────────────────────────────────────────────────────────
    "의식변화": [
        "GCS 9-13 (기면/혼돈)",
        "지남력 장애(시간/장소/사람)",
        "섬망(급성 혼돈 상태)",
        "의식변화 원인 불명",
    ],
    "두통": [
        "벼락두통(지주막하출혈 의심)",
        "뇌막 자극 징후 동반 두통(감염성)",
        "편두통 중증 발작",
        "고혈압성 두통(BP ≥180/120)",
        "긴장성/일차성 두통",
    ],
    "어지럼증": [
        "중추성 어지럼증 의심(HINTS 양성)",
        "BPPV (Dix-Hallpike 양성)",
        "전정신경염",
        "메니에르병 발작",
        "기립성 저혈압성 어지럼증",
    ],
    "경련/발작": [
        "경련 지속증(Status Epilepticus, ≥5분)",
        "연속 발작(군발 발작)",
        "단순 발작 후 회복기(Todd 마비 포함)",
        "첫 발작 삽화",
        "발열성 경련(소아)",
    ],
    "편측마비/근력저하": [
        "급성 허혈성 뇌졸중 의심(발생 ≤4.5시간)",
        "급성 허혈성 뇌졸중 의심(발생 >4.5시간)",
        "출혈성 뇌졸중 의심",
        "TIA 의심(증상 소실)",
        "말초 신경 손상",
    ],
    "감각이상": [
        "급성 편측 감각 소실(뇌졸중 의심)",
        "길랭-바레 증후군 의심(상행성 마비)",
        "척수 압박 의심",
        "말초 신경병증",
    ],
    "언어/삼킴 장애": [
        "급성 실어증(뇌졸중 의심)",
        "구음장애(연수 침범 의심)",
        "연하 장애(흡인 위험 동반)",
        "연하 장애(흡인 위험 없음)",
    ],
    "협조운동장애/보행 장애": [
        "급성 운동실조(소뇌/뇌간 침범 의심)",
        "만성 운동실조 악화",
        "보행 장애(낙상 위험)",
    ],
    "기타 신경계 증상": [
        "두개 내압 상승 징후",
        "수막염/뇌염 의심",
        "기타 신경계 증상",
    ],

    # ── 눈 ───────────────────────────────────────────────────────────────────
    "눈 통증": [
        "급성 녹내장(안압 상승)",
        "각막 궤양/감염(각막염)",
        "포도막염",
        "공막염",
        "비특이적 안통",
    ],
    "시력 변화": [
        "급성 시력 소실(망막 동맥 폐색 의심)",
        "급성 시력 소실(기타)",
        "복시(중추성 원인 의심)",
        "복시(말초성 원인)",
        "시야 결손",
        "점진적 시력 저하",
    ],
    "눈 외상": [
        "안구 관통상",
        "화학 화상(눈)",
        "안와 골절",
        "둔상 손상(앞방출혈 등)",
        "각막 찰과상",
    ],
    "눈 감염/염증": [
        "안와 봉와직염(안와격막 후)",
        "안검 봉와직염(안와격막 전)",
        "세균성 결막염",
        "바이러스성 결막염",
        "알레르기성 결막염",
    ],
    "눈 이물감": [
        "각막 이물(제거 필요)",
        "결막 이물",
        "이물감만 있음(이물 확인 안됨)",
    ],
    "기타 눈 증상": ["기타 눈 증상"],

    # ── 코 ───────────────────────────────────────────────────────────────────
    "코피(비출혈)": [
        "후비강 출혈(지혈 안됨)",
        "전비강 출혈(지속/혈액응고장애 동반)",
        "전비강 출혈(경미, 지혈 됨)",
    ],
    "코 이물": [
        "버튼 배터리 코 내 이물(응급)",
        "유기물 이물(악취/감염 의심)",
        "일반 코 이물",
    ],
    "코 막힘/분비물": [
        "급성 부비동염(합병증 의심)",
        "급성 비염/부비동염",
        "만성 비염",
    ],
    "코 외상": [
        "코 골절(변형 동반)",
        "코 외상(단순 타박)",
    ],
    "기타 코 증상": ["기타 코 증상"],

    # ── 귀 ───────────────────────────────────────────────────────────────────
    "귀 통증": [
        "급성 유양돌기염(합병증 의심)",
        "급성 중이염(고막 천공 동반)",
        "급성 중이염(단순)",
        "외이도염(중증)",
        "외이도염(경증)",
    ],
    "청력 감소": [
        "급성 감각신경성 난청(72시간 내)",
        "전도성 난청(귀지/중이염)",
        "만성 난청",
    ],
    "이루": [
        "혈성 이루(외상 후 두개기저골절 의심)",
        "화농성 이루(감염)",
        "장액성 이루",
    ],
    "귀 이물": [
        "살아있는 이물(곤충)",
        "버튼 배터리 귀 내 이물(응급)",
        "일반 귀 이물",
    ],
    "귀 외상": [
        "귀 관통상/열상",
        "귓바퀴 혈종",
        "귀 타박상",
    ],
    "기타 귀 증상": ["이명", "기타 귀 증상"],

    # ── 입,목/얼굴 ──────────────────────────────────────────────────────────
    "인후통": [
        "편도 주위 농양(기도 위협)",
        "후두개염 의심",
        "급성 편도염(발열/삼킴 장애 동반)",
        "인두염(경증)",
    ],
    "삼킴 장애": [
        "기도 위협 동반 삼킴 장애",
        "식도 이물(완전 폐색)",
        "삼킴 장애(기도 위협 없음)",
    ],
    "구강 통증": [
        "치과적 농양(안면부 봉와직염 동반)",
        "치과적 농양(국소)",
        "치통(단순)",
        "구내염/구강 궤양",
    ],
    "턱 통증/외상": [
        "하악 골절(변위 동반)",
        "턱 탈구",
        "하악 골절(단순)",
        "측두하악관절 장애",
    ],
    "얼굴 부종": [
        "혈관부종(기도 위협)",
        "안면 봉와직염(안와 침범)",
        "안면 봉와직염(국소)",
        "알레르기성 얼굴 부종",
    ],
    "구강/인두 이물": [
        "기도 내 이물(부분 폐색)",
        "식도 이물(버튼 배터리/날카로운 물체)",
        "식도 이물(단순)",
    ],
    "기타 구강/얼굴 증상": ["기타 구강/얼굴 증상"],

    # ── 호흡기계 ─────────────────────────────────────────────────────────────
    "호흡곤란": [
        "중증 호흡곤란(SpO2<90%, 호흡보조근 사용)",
        "중등도 호흡곤란(SpO2 90-94%)",
        "경증 호흡곤란(SpO2≥95%, 안정 시 증상)",
        "천식 중증 발작",
        "COPD 급성 악화(중증)",
        "COPD 급성 악화(경증/중등증)",
        "기흉 의심",
        "폐색전증 의심",
    ],
    "기침": [
        "객혈 동반 기침",
        "흡인 의심 기침",
        "감염성 기침(발열 동반)",
        "만성 기침 악화",
        "단순 기침",
    ],
    "천명": [
        "천식/COPD 악화 동반 천명(중증)",
        "천식/COPD 악화 동반 천명(경증)",
        "이물 흡인 후 천명",
        "기타 천명",
    ],
    "가슴통증(호흡기성)": [
        "기흉 의심(흉막성 흉통)",
        "폐색전증 의심",
        "흉막염",
        "근골격성 흉통",
    ],
    "객혈": [
        "대량 객혈(기도 위협)",
        "소량 객혈(혈담)",
        "기타 객혈",
    ],
    "기타 호흡기 증상": ["기타 호흡기 증상"],

    # ── 심혈관계 ─────────────────────────────────────────────────────────────
    "가슴통증(심장성)": [
        "STEMI 의심(ST 상승, 즉각 재관류 필요)",
        "NSTEMI/불안정 협심증 의심",
        "안정 협심증 의심",
        "대동맥 박리 의심",
        "심근염/심낭염 의심",
        "비심장성 흉통",
    ],
    "두근거림/부정맥": [
        "혈역학 불안정 부정맥(VT/VF)",
        "심방세동/조동(혈역학 안정)",
        "발작성 상심실빈맥(SVT)",
        "서맥(맥박<50, 증상 동반)",
        "서맥(무증상)",
        "양성 빈맥(동성빈맥)",
    ],
    "실신/전실신": [
        "심인성 실신(부정맥/구조적 심질환 의심)",
        "반사성 실신(혈관미주신경성)",
        "기립성 저혈압성 실신",
        "원인 불명 실신",
        "전실신(실신 전구 증상)",
    ],
    "고혈압": [
        "고혈압 응급(장기 손상 동반, BP≥180/120)",
        "고혈압 긴급(증상 있음, BP≥180/120)",
        "무증상 고혈압(BP≥180/120)",
        "고혈압(경증/중등도, 증상 동반)",
    ],
    "저혈압/쇼크": [
        "분배성 쇼크(패혈증/아나필락시스)",
        "저혈량성 쇼크(출혈/탈수)",
        "심인성 쇼크",
        "폐쇄성 쇼크(심낭압전/긴장성 기흉)",
        "증상성 저혈압(SBP<90)",
    ],
    "말초부종": [
        "급성 심부전 악화(폐부종)",
        "DVT 의심(일측성 하지 부종/홍반)",
        "양측성 하지 부종(심부전/신부전)",
        "단순 말초부종",
    ],
    "기타 심혈관 증상": ["기타 심혈관 증상"],

    # ── 소화기계 ─────────────────────────────────────────────────────────────
    "복통": [
        "복막 자극 징후(경직/반발통)",
        "장간막 허혈 의심(노인/심방세동)",
        "충수염 의심(RLQ 압통)",
        "장폐색 의심(팽만/구토)",
        "담낭염/담관염 의심",
        "췌장염 의심",
        "비특이적 복통(중등도)",
        "비특이적 복통(경증)",
    ],
    "구역/구토": [
        "혈역학 불안정 동반 반복 구토",
        "탈수 동반 반복 구토(경구 섭취 불가)",
        "두개 내압 상승 동반 구토",
        "경미한 구역/구토",
    ],
    "설사": [
        "혈성 설사(감염성 장염, 중증)",
        "설사 + 탈수(IV 수액 필요)",
        "감염성 설사(경증)",
        "만성 설사 악화",
    ],
    "변비": [
        "장폐색 의심 변비",
        "분변 매복",
        "단순 변비",
    ],
    "토혈/흑색변": [
        "대량 상부 위장관 출혈(혈역학 불안정)",
        "중등도 상부 위장관 출혈",
        "소량 흑색변(만성 경과)",
    ],
    "혈변": [
        "대량 하부 위장관 출혈(혈역학 불안정)",
        "중등도 혈변",
        "소량 혈변(치핵 의심)",
    ],
    "황달": [
        "급성 간부전(의식변화 동반)",
        "담관염(발열/황달/복통 - Charcot 삼징)",
        "폐쇄성 황달(감염 없음)",
        "용혈성 황달",
        "신생아 황달",
    ],
    "항문/직장 증상": [
        "직장 이물",
        "항문 주위 농양",
        "직장 탈출증",
        "항문 통증/치핵",
    ],
    "기타 소화기 증상": ["기타 소화기 증상"],

    # ── 임신/여성생식계 ──────────────────────────────────────────────────────
    "임신 관련 출혈": [
        "이소성 임신 파열 의심(쇼크)",
        "이소성 임신 의심(안정)",
        "임신 초기 출혈(유산 의심)",
        "임신 중기/후기 출혈(전치태반/태반조기박리)",
        "산후 출혈",
    ],
    "복통(임신 중/산후)": [
        "자간전증/자간증(고혈압+단백뇨+두통)",
        "조기 진통(임신 <37주)",
        "임신 중 복통(비산과적)",
        "산후 복통/감염",
    ],
    "질 분비물/감염": [
        "골반염(발열/복통 동반)",
        "세균성 질증",
        "질 칸디다증",
        "성병(STI) 의심",
    ],
    "유방 증상": [
        "유선염/유방 농양",
        "유방 통증/덩어리(신규)",
        "기타 유방 증상",
    ],
    "생리 관련 증상": [
        "월경통(중증)",
        "월경과다(빈혈 동반)",
        "무월경/불규칙 월경",
    ],
    "기타 여성생식계 증상": ["기타 여성생식계 증상"],

    # ── 비뇨기계/남성생식계 ──────────────────────────────────────────────────
    "배뇨통/빈뇨": [
        "패혈증 동반 신우신염",
        "단순 신우신염(발열/옆구리 통증)",
        "방광염(하부 요로감염)",
        "간질성 방광염 악화",
    ],
    "혈뇨": [
        "육안적 혈뇨(대량)",
        "육안적 혈뇨(소량, 통증 동반)",
        "육안적 혈뇨(무통성, 암 의심)",
        "현미경적 혈뇨(증상 동반)",
    ],
    "요로결석": [
        "요로결석(극심한 통증 + 감염 징후)",
        "요로결석(극심한 통증, 감염 없음)",
        "요로결석(경증 통증)",
    ],
    "음낭/고환 증상": [
        "고환 염전 의심(급성 고환 통증, 6시간 내)",
        "부고환염/고환염",
        "음낭 외상",
        "기타 음낭/고환 증상",
    ],
    "요폐": [
        "완전 요폐(방광 팽만, 극심한 불편감)",
        "부분 요폐",
    ],
    "기타 비뇨기 증상": ["기타 비뇨기 증상"],

    # ── 근골격계 ─────────────────────────────────────────────────────────────
    "사지 외상(골절/탈구 의심)": [
        "개방성 골절",
        "혈관/신경 손상 동반 골절",
        "폐쇄성 장관골 골절",
        "관절 탈구(어깨/고관절 등)",
        "수부/족부 골절",
        "소아 성장판 손상 의심",
    ],
    "관절통": [
        "패혈성 관절염 의심(발열/발적/온감)",
        "통풍 발작",
        "류마티스 관절염 급성 악화",
        "외상성 관절통(삼출 동반)",
        "비특이적 관절통",
    ],
    "근육통/경련": [
        "횡문근융해증 의심(근육통+갈색뇨)",
        "근육 파열",
        "근육 경련(중증)",
        "일반 근육통",
    ],
    "등/척추 통증": [
        "척추 압박 골절(골다공증/외상)",
        "척수 압박 증상(하지 마비/배변장애)",
        "요추 추간판 탈출증(신경 증상 동반)",
        "비특이적 요통(급성)",
        "만성 요통 악화",
    ],
    "사지 부종/홍반": [
        "봉와직염(중증, 전신 증상 동반)",
        "봉와직염(경증/국소)",
        "DVT 의심",
        "단순 타박상/부종",
    ],
    "보행 장애": [
        "골절/외상에 의한 보행 불가",
        "신경계 원인 보행 장애(신규)",
        "만성 보행 장애 악화",
    ],
    "기타 근골격계 증상": ["기타 근골격계 증상"],

    # ── 몸통외상 ─────────────────────────────────────────────────────────────
    "두부 외상": [
        "중증 두부 외상(GCS≤8, 뇌압 상승 징후)",
        "중등도 두부 외상(GCS 9-13)",
        "경증 두부 외상(GCS 14-15, 의식 소실/기억상실)",
        "경미한 두부 타박(증상 없음)",
    ],
    "경추 외상": [
        "경추 외상 + 신경학적 결손",
        "경추 외상(신경학적 결손 없음, 고에너지 기전)",
        "경추 외상(저에너지 기전)",
    ],
    "흉부 외상": [
        "개방성 흉부 외상(기흉/혈흉)",
        "긴장성 기흉",
        "혈흉",
        "다발성 늑골 골절(연가슴)",
        "단순 늑골 골절",
        "흉부 좌상",
    ],
    "복부 외상": [
        "복부 관통상(장기 손상 의심)",
        "복부 둔상(FAST 양성/혈역학 불안정)",
        "복부 둔상(FAST 음성/안정)",
    ],
    "골반 외상": [
        "골반 골절(불안정, 대량 출혈 위험)",
        "골반 골절(안정)",
        "천미추부 타박",
    ],
    "다발성 외상": [
        "다발성 중증 외상(ISS ≥16)",
        "다발성 중등도 외상",
    ],

    # ── 환경손상 ─────────────────────────────────────────────────────────────
    "화상": [
        "중증 화상(체표면적 >20% 또는 3도)",
        "흡입 화상(기도 위협)",
        "화학 화상(체표면적 >5%)",
        "중등도 화상(2도, 체표면적 5-20%)",
        "경증 화상(2도 <5% 또는 1도)",
    ],
    "열 손상(열사병/열피로)": [
        "열사병(체온 ≥40°C, 의식변화)",
        "열탈진(저혈압/빈맥, 의식 명료)",
        "열경련",
    ],
    "저체온증/동상": [
        "중증 저체온증(체온 <32°C, 의식변화)",
        "중등도 저체온증(체온 32-35°C)",
        "경증 저체온증(체온 35-36°C)",
        "동상(심층 동상)",
        "동상(표층 동상)",
    ],
    "익수/질식": [
        "익수(의식 없음/심폐소생술 진행 중)",
        "익수(의식 있음, 호흡 이상)",
        "익수(증상 없음, 관찰 필요)",
        "이물 질식(부분 기도 폐색)",
    ],
    "전기/낙뢰 손상": [
        "낙뢰 손상(심정지/의식 소실)",
        "고압 전기 손상",
        "저압 전기 손상(심율동 이상 위험)",
    ],
    "독소/방사선 노출": [
        "독가스/화학물질 노출(증상 동반)",
        "독버섯/독성 식물 섭취",
        "방사선 노출",
        "일산화탄소 중독",
    ],
    "교상/자상": [
        "독사 교상(독소 주입 의심)",
        "사람 교상(감염 위험)",
        "동물 교상(광견병 위험)",
        "곤충/해양생물 자상(아나필락시스 위험)",
        "단순 교상/자상",
    ],

    # ── 피부 ─────────────────────────────────────────────────────────────────
    "발진": [
        "발진 + 발열 + 활력징후 이상(패혈증 의심)",
        "수막구균혈증 의심(자반성 발진)",
        "Stevens-Johnson/TEN 의심",
        "약물 발진(광범위)",
        "감염성 발진(국소)",
        "알레르기성/접촉성 발진",
    ],
    "두드러기/혈관부종": [
        "혈관부종(기도: 입술/혀/목)",
        "두드러기 + 아나필락시스 전구 증상",
        "급성 두드러기(호흡기 증상 없음)",
        "만성 두드러기 악화",
    ],
    "피부 감염": [
        "괴사성 근막염 의심",
        "봉와직염(중증, 패혈증 동반)",
        "봉와직염(경증/국소)",
        "피부 농양(절개 배농 필요)",
        "단순 피부 감염",
    ],
    "피부 외상(열상/좌상)": [
        "동맥 손상 동반 열상",
        "봉합 필요 열상(복잡)",
        "봉합 필요 열상(단순)",
        "찰과상/타박상",
    ],
    "기타 피부 증상": ["기타 피부 증상"],

    # ── 일반 ─────────────────────────────────────────────────────────────────
    "발열": [
        "패혈증 의심(발열 + 활력징후 이상)",
        "호중구 감소성 발열(항암 치료 중)",
        "생후 3개월 미만 발열",
        "면역저하 환자 발열",
        "발열(원인 불명, 활력징후 안정)",
        "경미한 발열(38°C 미만, 증상 경미)",
    ],
    "전신 쇠약/피로": [
        "급성 전신 쇠약(패혈증/심혈관 원인 의심)",
        "아급성 전신 쇠약(기저질환 악화)",
        "만성 피로 악화",
    ],
    "체중 감소": [
        "급격한 체중 감소 + 활력징후 이상",
        "비의도적 체중 감소(악성종양 의심)",
        "의도적 체중 감소(섭식장애 의심)",
    ],
    "발한/오한": [
        "오한 + 고열 + 활력징후 이상(패혈증)",
        "야간 발한 + 체중 감소(결핵/악성종양)",
        "단순 오한/발한",
    ],
    "전신 부종": [
        "전신 부종 + 호흡곤란(심부전/신부전)",
        "전신 부종(활력징후 안정)",
    ],
    "기타 전신 증상": ["기타 전신 증상"],
}


# ──────────────────────────────────────────────────────────────────────────────
# 편의 함수
# ──────────────────────────────────────────────────────────────────────────────

def get_stage3_candidates(stage2_selection: str) -> list[str]:
    """stage2 선택값으로 stage3 후보군 반환."""
    return STAGE3_BY_STAGE2.get(stage2_selection, [])


def get_stage4_candidates(stage3_selection: str) -> list[str]:
    """stage3 선택값으로 stage4 후보군 반환."""
    return STAGE4_BY_STAGE3.get(stage3_selection, [])
